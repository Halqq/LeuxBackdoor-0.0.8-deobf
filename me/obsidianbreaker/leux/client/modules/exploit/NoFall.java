package me.obsidianbreaker.leux.client.modules.exploit;

import give up;
import me.obsidianbreaker.leux.client.Leux;
import me.obsidianbreaker.leux.client.event.events.EventPacket;
import me.obsidianbreaker.leux.client.guiscreen.settings.Setting;
import me.obsidianbreaker.leux.client.modules.Category;
import me.obsidianbreaker.leux.client.modules.Module;
import me.obsidianbreaker.leux.client.util.EntityUtil;
import me.zero.alpine.fork.listener.EventHandler;
import me.zero.alpine.fork.listener.Listener;
import net.minecraft.entity.Entity;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.init.Items;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraft.util.EnumHand;
import net.minecraft.util.math.RayTraceResult;
import net.minecraft.util.math.Vec3d;
import net.minecraft.world.World;

public class NoFall extends Module {
  @EventHandler
  public Listener sendListener = new Listener(this::lambda$new$0, new java.util.function.Predicate[0]);
  
  public Setting bucket = create("Bucket", "NoFallBucket", true);
  
  public Setting distance = create("Distance", "NoFallDistance", 15, 0, 100);
  
  public long last = -1176966792L ^ 0xFFFFFFFFB9D8E978L;
  
  public Setting packet = create("Packet", "NoFallPacket", true);
  
  public void lambda$new$0(EventPacket.SendPacket paramSendPacket) {
    (give up)null;
    if (Leux.get_module_manager().get_module_with_tag("ElytraFly").is_active())
      return; 
    if (paramSendPacket.get_packet() instanceof CPacketPlayer && this.packet.get_value(true))
      ((CPacketPlayer)paramSendPacket.get_packet()).field_149474_g = true; 
  }
  
  public void update() {
    (give up)null;
    if (Leux.get_module_manager().get_module_with_tag("ElytraFly").is_active())
      return; 
    Vec3d vec3d;
    RayTraceResult rayTraceResult;
    if (this.bucket.get_value(true) && mc.field_71439_g.field_70143_R >= this.distance.get_value(15) && !EntityUtil.isLiving((Entity)mc.field_71439_g) && System.currentTimeMillis() - this.last > (1312076353L ^ 0x4E34B225L) && (rayTraceResult = mc.field_71441_e.func_147447_a(vec3d = mc.field_71439_g.func_174791_d(), vec3d.func_72441_c(0.0D, -5.329999923706055D, 0.0D), true, true, false)) != null && rayTraceResult.field_72313_a == RayTraceResult.Type.BLOCK) {
      EnumHand enumHand = EnumHand.MAIN_HAND;
      if (mc.field_71439_g.func_184592_cb().func_77973_b() == Items.field_151131_as) {
        enumHand = EnumHand.OFF_HAND;
      } else if (mc.field_71439_g.func_184614_ca().func_77973_b() != Items.field_151131_as) {
        byte b = 0;
        while (true) {
          9;
          if (mc.field_71439_g.field_71071_by.func_70301_a(b).func_77973_b() != Items.field_151131_as)
            continue; 
          mc.field_71439_g.field_71071_by.field_70461_c = b;
          mc.field_71439_g.field_70125_A = Float.intBitsToFloat(1.03793088E9F ^ 0x7F699197);
          this.last = System.currentTimeMillis();
          return;
        } 
      } 
      mc.field_71439_g.field_70125_A = Float.intBitsToFloat(1.01590195E9F ^ 0x7E396F13);
      mc.field_71442_b.func_187101_a((EntityPlayer)mc.field_71439_g, (World)mc.field_71441_e, enumHand);
      this.last = System.currentTimeMillis();
    } 
  }
  
  public NoFall() {
    super(Category.exploit);
  }
}
