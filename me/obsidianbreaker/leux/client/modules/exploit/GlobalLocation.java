package me.obsidianbreaker.leux.client.modules.exploit;

import give up;
import me.obsidianbreaker.leux.client.event.events.EventPacket;
import me.obsidianbreaker.leux.client.guiscreen.settings.Setting;
import me.obsidianbreaker.leux.client.modules.Category;
import me.obsidianbreaker.leux.client.modules.Module;
import me.obsidianbreaker.leux.client.util.MessageUtil;
import me.zero.alpine.fork.listener.EventHandler;
import me.zero.alpine.fork.listener.Listener;
import net.minecraft.client.Minecraft;
import net.minecraft.init.SoundEvents;
import net.minecraft.network.play.server.SPacketEffect;
import net.minecraft.network.play.server.SPacketSoundEffect;
import net.minecraft.network.play.server.SPacketSpawnMob;
import net.minecraft.util.SoundCategory;
import net.minecraft.util.math.BlockPos;
import net.minecraft.util.math.MathHelper;

public class GlobalLocation extends Module {
  public Setting ender_dragon = create("Ender Dragon", "EnderDragon", false);
  
  public Setting slimes = create("Slimes", "Slimes", false);
  
  public Setting wither = create("Wither", "Wither", false);
  
  public Setting thunder = create("Thunder", "Thunder", true);
  
  @EventHandler
  public Listener packet_event = new Listener(this::lambda$new$0, new java.util.function.Predicate[0]);
  
  public Setting donkey = create("Donkey", "Donkey", false);
  
  public Setting end_portal = create("End Portal", "EndPortal", true);
  
  public void lambda$new$0(EventPacket paramEventPacket) {
    (give up)null;
    if (paramEventPacket.get_packet() instanceof SPacketSpawnMob) {
      SPacketSpawnMob sPacketSpawnMob = (SPacketSpawnMob)paramEventPacket.get_packet();
      if (this.slimes.get_value(true)) {
        Minecraft minecraft = Minecraft.func_71410_x();
        if (sPacketSpawnMob.func_149025_e() == 55 && sPacketSpawnMob.func_186892_f() <= 40.0D && !minecraft.field_71441_e.func_180494_b(minecraft.field_71439_g.func_180425_c()).func_185359_l().toLowerCase().contains("swamp")) {
          BlockPos blockPos = new BlockPos(sPacketSpawnMob.func_186891_e(), sPacketSpawnMob.func_186892_f(), sPacketSpawnMob.func_186893_g());
          MessageUtil.send_client_message("Slime Spawned in chunk X:" + (minecraft.field_71441_e.func_175726_f(blockPos)).field_76635_g + " Z:" + (minecraft.field_71441_e.func_175726_f(blockPos)).field_76647_h);
        } 
      } 
      if (this.donkey.get_value(true) && sPacketSpawnMob.func_149025_e() == 31)
        MessageUtil.send_client_message(String.format("Donkey spawned at %s %s %s", new Object[] { Double.valueOf(sPacketSpawnMob.func_186891_e()), Double.valueOf(sPacketSpawnMob.func_186892_f()), Double.valueOf(sPacketSpawnMob.func_186893_g()) })); 
    } else if (paramEventPacket.get_packet() instanceof SPacketSoundEffect) {
      SPacketSoundEffect sPacketSoundEffect = (SPacketSoundEffect)paramEventPacket.get_packet();
      if (this.thunder.get_value(true) && sPacketSoundEffect.func_186977_b() == SoundCategory.WEATHER && sPacketSoundEffect.func_186978_a() == SoundEvents.field_187754_de) {
        float f = Float.intBitsToFloat(2.11647206E9F ^ 0x7E26CD3F);
        double d1 = sPacketSoundEffect.func_149207_d() - (Minecraft.func_71410_x()).field_71439_g.field_70165_t;
        double d2 = sPacketSoundEffect.func_149210_f() - (Minecraft.func_71410_x()).field_71439_g.field_70161_v;
        f = (float)(f + MathHelper.func_76138_g(Math.toDegrees(Math.atan2(d2, d1)) - 90.0D - f));
        MessageUtil.send_client_message("Lightning spawned X:" + (Minecraft.func_71410_x()).field_71439_g.field_70165_t + " Z:" + (Minecraft.func_71410_x()).field_71439_g.field_70161_v + " Angle:" + f);
      } 
    } else if (paramEventPacket.get_packet() instanceof SPacketEffect) {
      SPacketEffect sPacketEffect = (SPacketEffect)paramEventPacket.get_packet();
      if (sPacketEffect.func_149242_d() == 1023 && this.wither.get_value(true)) {
        double d1 = Math.atan2(sPacketEffect.func_179746_d().func_177952_p() - (Minecraft.func_71410_x()).field_71439_g.field_70161_v, sPacketEffect.func_179746_d().func_177958_n() - (Minecraft.func_71410_x()).field_71439_g.field_70165_t);
        double d2 = Math.toDegrees(d1 + 1.5707963267948966D);
        if (d2 < 0.0D)
          d2 += 360.0D; 
        MessageUtil.send_client_message("Wither spawned in direction " + (d2 - 180.0D) + " with y position: " + sPacketEffect.func_179746_d().func_177956_o());
      } else if (sPacketEffect.func_149242_d() == 1038 && this.end_portal.get_value(true)) {
        MessageUtil.send_client_message("End portal spawned at " + sPacketEffect.func_179746_d().toString());
      } else if (sPacketEffect.func_149242_d() == 1028 && this.ender_dragon.get_value(true)) {
        MessageUtil.send_client_message("Ender dragon died at " + sPacketEffect.func_179746_d().toString());
      } 
    } 
  }
  
  public GlobalLocation() {
    super(Category.exploit);
  }
}
